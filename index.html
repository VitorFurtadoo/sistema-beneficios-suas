<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Benefícios</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <div class="header-logo">
            <img src="logo_semdes.png" alt="Logo SEMDES" class="logo">
            <h1>Sistema de Benefícios Eventuais</h1>
        </div>
        
        <div id="mainMenu" class="card main-menu-section active">
            <div class="main-menu">
                <button class="menu-btn btn-cadastrar" data-section="cadastroSection">
                    Cadastros
                </button>
                <button class="menu-btn btn-consultar" data-section="consultaSection">
                    Consulta
                </button>
                <button class="menu-btn btn-exportar" data-section="exportarSection">
                    Exportar
                </button>
                <button class="menu-btn btn-admin" id="adminMenuButton" data-section="adminSection" style="display:none;">
                    Administração
                </button>
                <button class="menu-btn btn-graficos" data-section="graficosSection">
                    Gráficos
                </button>
            </div>
            <div class="user-info">
                <span id="welcome-message"></span>
                <button class="secondary-btn" id="logout-btn">Sair</button>
            </div>
        </div>

        <div id="cadastroSection" class="section">
            <button class="back-btn" data-section="mainMenu">&larr; Voltar</button>
            <div class="card">
                <h2>Cadastro de Benefícios</h2>
                <form id="beneficioForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="beneficiario">Beneficiário</label>
                            <input type="text" id="beneficiario" name="beneficiario" placeholder="Ex: João da Silva" required>
                        </div>
                        <div class="form-group">
                            <label for="cpf">CPF</label>
                            <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00" required>
                        </div>
                        <div class="form-group">
                            <label for="data">Data</label>
                            <input type="date" id="data" name="data" required>
                        </div>
                        <div class="form-group">
                            <label for="valor">Valor</label>
                            <input type="number" id="valor" name="valor" step="0.01" placeholder="Ex: 350.00" required>
                        </div>
                        <div class="form-group">
                            <label for="beneficio">Benefício</label>
                            <select id="beneficio" name="beneficio" required>
                                <option value="">Selecione...</option>
                                <option value="Cesta Básica">Cesta Básica</option>
                                <option value="Auxílio Transporte">Auxílio Transporte</option>
                                <option value="Auxílio Funeral">Auxílio Funeral</option>
                                <option value="Aluguel Social">Aluguel Social</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="quantidade">Quantidade</label>
                            <input type="number" id="quantidade" name="quantidade" placeholder="Ex: 2" required>
                        </div>
                        <div class="form-group">
                            <label for="equipamento">Equipamento</label>
                            <select id="equipamento" name="equipamento" required>
                                <option value="">Selecione...</option>
                                <option value="CRAS Camboatã">CRAS Camboatã</option>
                                <option value="CRAS Nagibão">CRAS Nagibão</option>
                                <option value="CRAS Morada do Sol">CRAS Morada do Sol</option>
                                <option value="CRAS Jaderlândia">CRAS Jaderlândia</option>
                                <option value="CREAS">CREAS</option>
                                <option value="Abrigo de Idosos">Abrigo de Idosos</option>
                                <option value="Abrigo de Crianças">Abrigo de Crianças</option>
                            </select>
                        </div>
                        <div class="form-group" id="responsavelGroup" style="display:none;">
                            <label for="responsavel">Técnico Responsável pela Concessão</label>
                            <input type="text" id="responsavel" name="responsavel" placeholder="Ex: Maria da Luz">
                        </div>
                        <div class="form-group">
                            <label for="status">Status</label>
                            <select id="status" name="status">
                                <option value="Concedido">Concedido</option>
                                <option value="Pendente">Pendente</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label for="observacoes">Observações</label>
                            <textarea id="observacoes" name="observacoes" placeholder="Ex: Entrega prevista para 20/08"></textarea>
                        </div>
                    </div>
                    <div class="form-group full-width" style="margin-top: 20px;">
                        <button type="submit" class="submit-btn">Salvar</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="consultaSection" class="section">
            <button class="back-btn" data-section="mainMenu">&larr; Voltar</button>
            <div class="card">
                <h2>Registros de Benefícios</h2>
                <div class="filter-container">
                    <div class="form-group">
                        <label for="filter-beneficio">Benefício</label>
                        <select id="filter-beneficio">
                            <option value="">Todos</option>
                            <option value="Cesta Básica">Cesta Básica</option>
                            <option value="Auxílio Transporte">Auxílio Transporte</option>
                            <option value="Auxílio Funeral">Auxílio Funeral</option>
                            <option value="Aluguel Social">Aluguel Social</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filter-equipamento">Equipamento</label>
                        <select id="filter-equipamento">
                            <option value="">Todos</option>
                            <option value="CRAS Camboatã">CRAS Camboatã</option>
                            <option value="CRAS Nagibão">CRAS Nagibão</option>
                            <option value="CRAS Morada do Sol">CRAS Morada do Sol</option>
                            <option value="CRAS Jaderlândia">CRAS Jaderlândia</option>
                            <option value="CREAS">CREAS</option>
                            <option value="Abrigo de Idosos">Abrigo de Idosos</option>
                            <option value="Abrigo de Crianças">Abrigo de Crianças</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filter-status">Status</label>
                        <select id="filter-status">
                            <option value="">Todos</option>
                            <option value="Concedido">Concedido</option>
                            <option value="Pendente">Pendente</option>
                            <option value="Negado">Negado</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filter-data">Data</label>
                        <input type="date" id="filter-data">
                    </div>
                    <div class="filter-buttons">
                        <button class="filter-btn" id="btn-filtrar">Filtrar</button>
                        <button class="clear-filter-btn" id="btn-limpar">Limpar Filtros</button>
                        <button class="filter-btn" id="btn-separar">Separar por Data</button>
                    </div>
                </div>
                <table id="beneficiosTable">
                    <thead>
                        <tr>
                            <th>Beneficiário</th>
                            <th>CPF</th>
                            <th>Data</th>
                            <th>Valor</th>
                            <th>Benefício</th>
                            <th>Quantidade</th>
                            <th>Equipamento</th>
                            <th>Técnico Responsável pela Concessão</th>
                            <th>Status</th>
                            <th>Observações</th>
                            <th>Última Atualização</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
        
        <div id="editSection" class="section">
            <button class="back-btn" data-section="consultaSection">&larr; Cancelar</button>
            <div class="card">
                <h2>Editar Registro</h2>
                <form id="editForm">
                    <input type="hidden" id="editIndex">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="edit-beneficiario">Beneficiário</label>
                            <input type="text" id="edit-beneficiario" name="beneficiario" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-cpf">CPF</label>
                            <input type="text" id="edit-cpf" name="cpf" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-data">Data</label>
                            <input type="date" id="edit-data" name="data" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-valor">Valor</label>
                            <input type="number" id="edit-valor" name="valor" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-beneficio">Benefício</label>
                            <select id="edit-beneficio" name="beneficio" required>
                                <option value="Cesta Básica">Cesta Básica</option>
                                <option value="Auxílio Transporte">Auxílio Transporte</option>
                                <option value="Auxílio Funeral">Auxílio Funeral</option>
                                <option value="Aluguel Social">Aluguel Social</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="edit-quantidade">Quantidade</label>
                            <input type="number" id="edit-quantidade" name="quantidade" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-equipamento">Equipamento</label>
                            <select id="edit-equipamento" name="equipamento" required>
                                <option value="CRAS Camboatã">CRAS Camboatã</option>
                                <option value="CRAS Nagibão">CRAS Nagibão</option>
                                <option value="CRAS Morada do Sol">CRAS Morada do Sol</option>
                                <option value="CRAS Jaderlândia">CRAS Jaderlândia</option>
                                <option value="CREAS">CREAS</option>
                                <option value="Abrigo de Idosos">Abrigo de Idosos</option>
                                <option value="Abrigo de Crianças">Abrigo de Crianças</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="edit-responsavel">Técnico Responsável pela Concessão</label>
                            <input type="text" id="edit-responsavel" name="responsavel">
                        </div>
                        <div class="form-group">
                            <label for="edit-status">Status</label>
                            <select id="edit-status" name="status">
                                <option value="Concedido">Concedido</option>
                                <option value="Pendente">Pendente</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label for="edit-observacoes">Observações</label>
                            <textarea id="edit-observacoes" name="observacoes"></textarea>
                        </div>
                    </div>
                    <div class="form-group full-width" style="margin-top: 20px;">
                        <button type="button" class="delete-btn-edit">Excluir Registro</button>
                        <button type="submit" class="submit-btn" id="btn-salvar-edicao">Salvar Edição</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="exportarSection" class="section">
            <button class="back-btn" data-section="mainMenu">&larr; Voltar</button>
            <div class="card" style="text-align: center;">
                <h2>Exportar Dados</h2>
                <p>Clique no botão abaixo para exportar todos os registros da tabela para um arquivo CSV.</p>
                <button class="export-btn" id="btn-exportar-csv">Exportar para CSV</button>
            </div>
        </div>

        <div id="adminSection" class="section">
            <button class="back-btn" data-section="mainMenu">&larr; Voltar</button>
            <div class="card">
                <h2>Gerenciar Usuários</h2>
                <form id="adminForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="new-username">Novo Login</label>
                            <input type="text" id="new-username" name="new-username" required>
                        </div>
                        <div class="form-group">
                            <label for="new-password">Nova Senha</label>
                            <input type="password" id="new-password" name="new-password" required>
                        </div>
                        <div class="form-group">
                            <label for="new-role">Tipo de Acesso</label>
                            <select id="new-role" name="new-role" required>
                                <option value="user">Usuário Comum</option>
                                <option value="admin">Administrador</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group full-width" style="margin-top: 20px;">
                        <button type="submit" class="submit-btn">Cadastrar Usuário</button>
                    </div>
                </form>
                <div style="margin-top: 30px;">
                    <h3>Usuários Cadastrados</h3>
                    <table id="usersTable">
                        <thead>
                            <tr>
                                <th>Login</th>
                                <th>Tipo</th>
                                <th>Último Login</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="graficosSection" class="section">
            <button class="back-btn" data-section="mainMenu">&larr; Voltar</button>
            <div class="card">
                <h2>Visualização de Dados</h2>

                <div class="graficos-container">
                    <h3>Benefícios por Período</h3>
                    <div class="controls">
                        <label for="periodo-grafico">Agrupar por:</label>
                        <select id="periodo-grafico">
                            <option value="mes">Mês</option>
                            <option value="trimestre">Trimestre</option>
                            <option value="ano">Ano</option>
                        </select>
                        <label for="tipo-grafico-periodo">Tipo de Gráfico:</label>
                        <select id="tipo-grafico-periodo">
                            <option value="linha">Linha</option>
                            <option value="barra">Barra</option>
                        </select>
                        <button class="filter-btn" id="gerar-grafico-periodo">Gerar Gráfico</button>
                    </div>
                    <canvas id="grafico-periodo"></canvas>
                </div>

                <div class="graficos-container">
                    <h3>Benefícios por Equipamento</h3>
                    <div class="controls">
                        <label for="tipo-grafico-equipamento">Tipo de Gráfico:</label>
                        <select id="tipo-grafico-equipamento">
                            <option value="barra">Barra</option>
                            <option value="pizza">Pizza</option>
                        </select>
                        <button class="filter-btn" id="gerar-grafico-equipamento">Gerar Gráfico</button>
                    </div>
                    <canvas id="grafico-equipamento"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-storage.js"></script>
    <script src="js/script.js"></script>
</body>
</html>